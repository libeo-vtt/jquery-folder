!function(i){var e=function(e,s){this.folder=i(e),this.config=i.extend({animation:"linear",animationDuration:400,openFirstFolder:!0,ariaTextClass:"aria-text",singleOpen:!0,forceOpenClass:"is-default-open",folderGroupClass:"folder-group",folderTriggerClass:"folder-trigger",folderContentClass:"folder-content",ariaTextOpen:"Cliquer pour ouvrir",ariaTextClose:"Cliquer pour fermer",onFocus:i.noop,beforeOpen:i.noop,afterOpen:i.noop,beforeClose:i.noop,afterClose:i.noop,onBlur:i.noop,customGlobalClasses:{}},s||{}),this.classes=i.extend({active:"is-active",open:"is-open",hover:"is-hover",clicked:"is-clicked",extern:"is-external",error:"is-error"},this.config.customGlobalClasses||{}),this.folder.find("."+this.config.folderTriggerClass).buttonize({a11y:this.config.a11y}),this.folderTrigger=this.folder.find("."+this.config.folderTriggerClass),this.folderContent=this.folder.find("."+this.config.folderContentClass),this.folderTrigger.append('<span class="aria-text visuallyhidden"></span>'),this.folderAria=this.folderTrigger.find("."+this.config.ariaTextClass),this.init()};i.extend(e.prototype,{init:function(){this.bindEvents(),this.folder.hasClass(this.config.forceOpenClass)?this.folder.addClass(this.classes.active):(this.folderContent.hide(),this.changeAriaText(this.config.ariaTextOpen)),this.config.openFirstFolder&&this.openFirstFolder()},bindEvents:function(){this.folderTrigger.on("click",i.proxy(function(){this.folder.hasClass(this.classes.active)?this.closeFolder():this.openFolder()},this)),this.folderTrigger.on("focus",i.proxy(function(e){this.onTriggerFocus(i(e.currentTarget))},this)),this.folderTrigger.on("blur",i.proxy(function(e){this.onTriggerBlur(i(e.currentTarget))},this)),this.folderTrigger.on("focus",this.config.onFocus),this.folderTrigger.on("blur",this.config.onBlur)},openFolder:function(){this.config.beforeOpen(),"none"!==this.config.animation?this.folderContent.slideDown(this.config.animationDuration,i.proxy(function(){this.config.afterOpen(),this.folder.addClass(this.classes.active),this.changeAriaText(this.config.ariaTextClose)},this)):(this.folderContent.show(),this.config.afterOpen(),this.folder.addClass(this.classes.active),this.changeAriaText(this.config.ariaTextClose)),this.isGroup()&&this.isSingleOpen()&&this.closeSiblings()},closeFolder:function(){this.config.beforeClose(),"none"!==this.config.animation?this.folderContent.slideUp(this.config.animationDuration,i.proxy(function(){this.config.afterClose(),this.folder.removeClass(this.classes.active),this.changeAriaText(this.config.ariaTextOpen)},this)):(this.folderContent.hide(),this.config.afterClose(),this.folder.removeClass(this.classes.active),this.changeAriaText(this.config.ariaTextOpen))},openFirstFolder:function(){if(this.isGroup()){var i=this.folder.parent("."+this.config.folderGroupClass).find(".folder").first();i.find("."+this.config.folderContentClass).show(),i.addClass(this.classes.active)}else this.folder.addClass(this.classes.active).find("."+this.config.folderContentClass).show()},closeSiblings:function(){var i=this.getSiblings().not(this.folder).find("."+this.config.folderContentClass);"none"!==this.config.animation?i.slideUp(this.config.animationDuration):i.hide(),this.getSiblings().removeClass(this.classes.active)},changeAriaText:function(i){this.folderAria.text(i)},onTriggerFocus:function(i){i.find("."+this.config.ariaTextClass).attr("aria-live","polite")},onTriggerBlur:function(i){i.find("."+this.config.ariaTextClass).removeAttr("aria-live")},isGroup:function(){return this.folder.parent().hasClass("folder-group")},isSingleOpen:function(){return"undefined"!=typeof this.folder.parent().data("singleopen")||this.config.singleOpen},getSiblings:function(){return this.folder.siblings()||!1}}),i.fn.folder=function(s){return this.each(function(){var t=i(this);if(!t.data("folder")){var o=new e(this,s);t.data("folder",o)}})}}(jQuery);