!function(e){var s=function(s,t){this.folderGroup=e(s),this.defaults={animation:"linear",animationDuration:400,openFirstFolder:!0,singleOpen:!0,onFocus:e.noop,beforeOpen:e.noop,afterOpen:e.noop,beforeClose:e.noop,afterClose:e.noop,onBlur:e.noop,labels:{ariaOpen:"Cliquer pour ouvrir",ariaClose:"Cliquer pour fermer"},classes:{ariaText:"aria-text",forceOpen:"is-default-open",folderGroup:"folder-group",folderTrigger:"folder-trigger",folderContent:"folder-content",states:{active:"is-active"}}},this.classes=e.extend(!0,this.defaults.classes,window.project?window.project.classes:{}),this.labels=e.extend(!0,this.defaults.labels,window.project?window.project.labels:{}),this.config=e.extend(!0,this.defaults,t||{}),this.folders=this.folderGroup.find(".folder"),this.folderGroup.find("."+this.classes.folderTrigger).buttonize({a11y:this.config.a11y}),this.folderGroup.find("."+this.classes.folderTrigger).attr("type","button"),this.folderTriggers=this.folderGroup.find("."+this.classes.folderTrigger),this.folderContents=this.folderGroup.find("."+this.classes.folderContent),this.folderTriggers.append('<span class="'+this.classes.ariaText+' visuallyhidden"></span>'),this.folderArias=this.folderTriggers.find("."+this.classes.ariaText),this.init()};e.extend(s.prototype,{init:function(){this.bindEvents(),this.folders.each(e.proxy(function(s,t){var i=e(t);currentAriaContainer=i.find("."+this.classes.ariaText),currentContent=i.find("."+this.classes.folderContent),i.hasClass(this.classes.forceOpen)?(i.addClass(this.classes.states.active),this.changeAriaText(currentAriaContainer,this.labels.ariaClose)):(currentContent.hide(),this.changeAriaText(currentAriaContainer,this.labels.ariaOpen))},this)),this.config.openFirstFolder&&this.openFirstFolder()},bindEvents:function(){this.folderTriggers.on("click",e.proxy(function(s){e(s.currentTarget).parents("").hasClass(this.classes.states.active)?this.closeFolder(e(s.currentTarget)):this.openFolder(e(s.currentTarget))},this)),this.folderTriggers.on("focus",e.proxy(function(s){this.onTriggerFocus(e(s.currentTarget))},this)),this.folderTriggers.on("blur",e.proxy(function(s){this.onTriggerBlur(e(s.currentTarget))},this)),this.folderTriggers.on("focus",this.config.onFocus),this.folderTriggers.on("blur",this.config.onBlur)},openFolder:function(s){this.config.beforeOpen(),currentAriaContainer=s.find("."+this.classes.ariaText),currentFolder=s.parent(),currentContent=currentFolder.find("."+this.classes.folderContent),"none"!==this.config.animation?(1==this.config.singleOpen&&(this.folderContents.slideUp(this.config.animationDuration),this.folders.removeClass(this.classes.states.active),this.changeAriaText(this.folderArias,this.labels.ariaOpen)),currentContent.slideDown(this.config.animationDuration,e.proxy(function(){currentFolder.addClass(this.classes.states.active),this.config.afterOpen()},this))):(1==this.config.singleOpen&&(this.folderContents.hide(),this.folders.removeClass(this.classes.states.active),this.changeAriaText(this.folderArias,this.labels.ariaOpen)),currentContent.show(),currentFolder.addClass(this.classes.states.active),this.config.afterOpen()),this.changeAriaText(currentAriaContainer,this.labels.ariaClose)},closeFolder:function(s){this.config.beforeClose(),currentAriaContainer=s.find("."+this.classes.ariaText),currentFolder=s.parent(),currentContent=currentFolder.find("."+this.classes.folderContent),"none"!==this.config.animation?currentContent.slideUp(this.config.animationDuration,e.proxy(function(){currentFolder.removeClass(this.classes.states.active),this.config.afterClose()},this)):(currentContent.hide(),currentFolder.removeClass(this.classes.states.active),this.config.afterClose()),this.changeAriaText(currentAriaContainer,this.labels.ariaOpen)},openFirstFolder:function(){var e=this.folders.first();e.find("."+this.classes.folderContent).show(),e.addClass(this.classes.states.active),this.changeAriaText(e.find("."+this.classes.ariaText),this.labels.ariaClose)},changeAriaText:function(e,s){e.text(s)},onTriggerFocus:function(e){e.find("."+this.classes.ariaText).attr("aria-live","polite")},onTriggerBlur:function(e){e.find("."+this.classes.ariaText).removeAttr("aria-live")}}),e.fn.folder=function(t){return this.each(function(){var i=e(this);if(!i.data("folder")){var r=new s(this,t);i.data("folder",r)}})}}(jQuery);