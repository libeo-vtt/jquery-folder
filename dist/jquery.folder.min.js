!function(i){var e=function(e,t){this.folderGroup=i(e),this.config=i.extend({animation:"linear",animationDuration:400,openFirstFolder:!0,ariaTextClass:"aria-text",singleOpen:!0,forceOpenClass:"is-default-open",folderGroupClass:"folder-group",folderTriggerClass:"folder-trigger",folderContentClass:"folder-content",ariaTextOpen:"Cliquer pour ouvrir",ariaTextClose:"Cliquer pour fermer",onFocus:i.noop,beforeOpen:i.noop,afterOpen:i.noop,beforeClose:i.noop,afterClose:i.noop,onBlur:i.noop,customGlobalClasses:{}},t||{}),this.classes=i.extend({active:"is-active",open:"is-open",hover:"is-hover",clicked:"is-clicked",extern:"is-external",error:"is-error"},(void 0!==window.classes?window.classes:this.config.customGlobalClasses)||{}),this.folders=this.folderGroup.find(".folder"),this.folderGroup.find("."+this.config.folderTriggerClass).buttonize({a11y:this.config.a11y}),this.folderTriggers=this.folderGroup.find("."+this.config.folderTriggerClass),this.folderContents=this.folderGroup.find("."+this.config.folderContentClass),this.folderTriggers.append('<span class="'+this.config.ariaTextClass+' visuallyhidden"></span>'),this.folderArias=this.folderTriggers.find("."+this.config.ariaTextClass),this.init()};i.extend(e.prototype,{init:function(){this.bindEvents(),this.folders.each(i.proxy(function(e,t){var r=i(t);currentAriaContainer=r.find("."+this.config.ariaTextClass),currentContent=r.find("."+this.config.folderContentClass),r.hasClass(this.config.forceOpenClass)?(r.addClass(this.classes.active),this.changeAriaText(currentAriaContainer,this.config.ariaTextClose)):(currentContent.hide(),this.changeAriaText(currentAriaContainer,this.config.ariaTextOpen))},this)),this.config.openFirstFolder&&this.openFirstFolder()},bindEvents:function(){this.folderTriggers.on("click",i.proxy(function(e){i(e.currentTarget).parent().hasClass(this.classes.active)?this.closeFolder(i(e.currentTarget)):this.openFolder(i(e.currentTarget))},this)),this.folderTriggers.on("focus",i.proxy(function(e){this.onTriggerFocus(i(e.currentTarget))},this)),this.folderTriggers.on("blur",i.proxy(function(e){this.onTriggerBlur(i(e.currentTarget))},this)),this.folderTriggers.on("focus",this.config.onFocus),this.folderTriggers.on("blur",this.config.onBlur)},openFolder:function(e){this.config.beforeOpen(),currentAriaContainer=e.find("."+this.config.ariaTextClass),currentFolder=e.parent(),currentContent=currentFolder.find("."+this.config.folderContentClass),"none"!==this.config.animation?(1==this.config.singleOpen&&(this.folderContents.slideUp(this.config.animationDuration),this.folders.removeClass(this.classes.active),this.changeAriaText(this.folderArias,this.config.ariaTextOpen)),currentContent.slideDown(this.config.animationDuration,i.proxy(function(){currentFolder.addClass(this.classes.active),this.config.afterOpen()},this))):(1==this.config.singleOpen&&(this.folderContents.hide(),this.folders.removeClass(this.classes.active),this.changeAriaText(this.folderArias,this.config.ariaTextOpen)),currentContent.show(),currentFolder.addClass(this.classes.active),this.config.afterOpen()),this.changeAriaText(currentAriaContainer,this.config.ariaTextClose)},closeFolder:function(e){this.config.beforeClose(),currentAriaContainer=e.find("."+this.config.ariaTextClass),currentFolder=e.parent(),currentContent=currentFolder.find("."+this.config.folderContentClass),"none"!==this.config.animation?currentContent.slideUp(this.config.animationDuration,i.proxy(function(){currentFolder.removeClass(this.classes.active),this.config.afterClose()},this)):(currentContent.hide(),currentFolder.removeClass(this.classes.active),this.config.afterClose()),this.changeAriaText(currentAriaContainer,this.config.ariaTextOpen)},openFirstFolder:function(){var i=this.folders.first();i.find("."+this.config.folderContentClass).show(),i.addClass(this.classes.active),this.changeAriaText(i.find("."+this.config.ariaTextClass),this.config.ariaTextClose)},changeAriaText:function(i,e){i.text(e)},onTriggerFocus:function(i){i.find("."+this.config.ariaTextClass).attr("aria-live","polite")},onTriggerBlur:function(i){i.find("."+this.config.ariaTextClass).removeAttr("aria-live")}}),i.fn.folder=function(t){return this.each(function(){var r=i(this);if(!r.data("folder")){var n=new e(this,t);r.data("folder",n)}})}}(jQuery);